# í•„ê¸°ë…¸íŠ¸  

ì˜ìƒ ê°•ì˜ê°€ ì•„ë‹ˆì˜€ë‹¤ë‹ˆ...  

ì´ ê°•ì¢Œì—ì„œëŠ” "ì¹´ì¹´ì˜¤ì›Œí¬ i ì˜¤í”ˆë¹Œë”" ë¼ëŠ” ì±—ë´‡ ë¹Œë”ë¥¼ í†µí•´ ì±—ë´‡ ì œì‘ì„ ìˆ˜í–‰í•œë‹¤.

ì„œë²„ ì§€ì¹­í•˜ëŠ” ìš©ì–´ê°€ ì˜¤ë½ê°€ë½ í•˜ëŠ” ëŠë‚Œì¸ë°, ì˜ë„í•œ ê±´ì§€...

## 1. ì¹´ì¹´ì˜¤ì›Œí¬ ë´‡ ì†Œê°œ
ì¹´ì¹´ì˜¤ì›Œí¬ì˜ ë©”ì‹œì§€ ë§í’ì„ ì€ ë‹¨ìœ„ ìš”ì†Œì¸ "ë¸”ë¡ ì¡°í•©"ì„ í†µí•´ ìƒì„±. ê°„ë‹¨íˆ ë§í•´ì„œ, **ë§í’ì„  í•˜ë‚˜ê°€ ì—¬ëŸ¬ ê°œì˜ ë¸”ëŸ­**ìœ¼ë¡œ ì´ë£¨ì–´ ì§„ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.  

ex.  
```
Text Block          ---> ì œëª©    ---> ë‹¤ìŒ ì¼ì •ì— ì´ˆëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤.
Devider Block       ---> êµ¬ë¶„ì„   ---> -------------------------
Text Block          ---> ì œëª©    ---> [ììœ ë©˜í† ë§] ã…ã…ã…ë©˜í† 
Description Block   ---> ì„¤ëª…    ---> ì¼ì‹œ    17:00 ~ 19:00
Description Block   ---> ì„¤ëª…    ---> ì¥ì†Œ    ì†Œë§ˆì„¼í„°
Button Block        ---> ë²„íŠ¼    --->        [ìì„¸íˆë³´ê¸°]
```

ì»¤ìŠ¤í…€ ë´‡ì—ëŠ” ì‹œë‚˜ë¦¬ì˜¤ íƒ€ì…ì´ë¼ëŠ”ê²Œ ì¡´ì¬.  
 * ì•Œë¦¼í˜• : ë‹¨ë°©í–¥ ì„±ê²©ì˜ ì •ë³´ ì œê³µ ë° ì•Œë¦¼ ê¸°ëŠ¥ ìˆ˜í–‰
 * ë°˜ì‘í˜• : ì‘ë‹µ, ìŠ¹ì¸ ë° ë°˜ë ¤, ì˜ê²¬ ì „ì†¡, íˆ¬í‘œ ë“± ë´‡ì„ í†µí•´ íŠ¹ì • ê¸°ëŠ¥ ìˆ˜í–‰ ê°€ëŠ¥

ë´‡ì€ ì¹´ì¹´ì˜¤ì›Œí¬ ìƒì—ì„œ ì‘ë™í•˜ë©´ì„œ ë´‡ ì²˜ë¦¬ ì„œë²„ë¡œ API ìš”ì²­ì„ ë³´ë‚´ ì‘ë‹µë°›ëŠ” ì—­í• .  

[[ê³ ê°ì‚¬ ì„œë²„]] - [[ì¹´ì¹´ì˜¤ì›Œí¬ ì„œë²„]] - [[ì±„íŒ…ë°©]]

Modalì€ ì¼ì¢…ì˜ íŒì—… ì¸í’‹ ì°½

## 2. ë´‡ í”„ë¡œì„¸ìŠ¤ ë° í™œìš© ì‚¬ë¡€

ì•Œë¦¼í˜• ì»¤ìŠ¤í…€ ë´‡ í”„ë¡œì„¸ìŠ¤  
 1. Bot ìƒì„±
 2. Bot ì¸ì¦ (App Key ì „ì†¡)
 3. ë©¤ë²„ ì¡°íšŒ
 4. ì±„íŒ…ë°© ìƒì„±
 5. ì•Œë¦¼í˜• ëŒ€í™” (ì¡°í•©í˜• ë§í’ì„ )  

---

ë°˜ì‘í˜• ì»¤ìŠ¤í…€ ë´‡ í”„ë¡œì„¸ìŠ¤ (submit_action)  
 1. ë©”ì‹œì§€ ì „ì†¡ (Button Block: submit_action)
 2. ì•¡ì…˜ ë²„íŠ¼ í´ë¦­
 3. ì•¡ì…˜ ì´ë²¤íŠ¸ ì „ë‹¬ (Callback URL)
 4. ì•¡ì…˜ ì´ë²¤íŠ¸ì— ë”°ë¥¸ ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ ì§„í–‰  

ì´ ê²½ìš° ê³ ê°ì‚¬ ì„œë²„ëŠ” action_typeì´ submit_modalì¸ ë²„íŠ¼ì´ í¬í•¨ëœ ë©”ì‹œì§€ë¥¼ ë°œì†¡í•´ì•¼ í•œë‹¤.  

---

ë°˜ì‘í˜• ì»¤ìŠ¤í…€ ë´‡ í”„ë¡œì„¸ìŠ¤ (call_modal)  
 1. ë©”ì‹œì§€ ì „ì†¡ (Button Block: call_modal)
 2. ì•¡ì…˜ ë²„íŠ¼ í´ë¦­
 3. ì—‘ì…˜ ì´ë²¤íŠ¸ ì „ë‹¬ (Request URL)
 4. Modal ë¸”ë¡ ì •ë³´ ì „ì†¡
 5. Modal ë¸”ë¡ ì •ë³´ í‘œì‹œ
 6. ì •ë³´ ì…ë ¥ & ì•¡ì…˜ ë²„íŠ¼ í´ë¦­
 7. Modal ì´ë²¤íŠ¸ ì „ë‹¬ (Callback URL)
 8. Modal ì¢…ë£Œ  

ì´ë²ˆì—ëŠ” ë‹¹ì—°íˆ action_typeì´ call_modalì¸ ë²„íŠ¼ì´ ë©”ì‹œì§€ì— í¬í•¨ë˜ì–´ì•¼í•œë‹¤.  

## 3. ìƒ˜í”Œ ë´‡
### 1. Giphy APIë¥¼ ì´ìš©í•œ ì§¤ë°© ë´‡
ì•Œë¦¼í˜• ë´‡ìœ¼ë¡œ, Modalì„ í†µí•´ ì•Œë¦¼ ì‹œê°„, ì¢…ë¥˜, ê°œìˆ˜ë¥¼ ì„¤ì •í•˜ë©´ ì‹œê°„ì— ë§ì¶° Giphyë¡œ ë¶€í„° ì§¤ë°©ì„ ê°€ì ¸ì™€ì¤€ë‹¤.  
ì‹œë‚˜ë¦¬ì˜¤  
 1. ë¯¸ë¦¬ ì§€ì •í•´ë‘” dog, catê³¼ ê°™ì€ í‚¤ì›Œë“œë¡œ Giphy API í˜¸ì¶œ í›„ ê²°ê³¼ ê°’ ì¤‘ gif urlì„ íŒŒì‹±í•´ì„œ ì„œë²„ì— ì €ì¥í•´ë‘”ë‹¤.
 2. ì‚¬ìš©ìê°€ í‚¤ì›Œë“œ, ì•Œë¦¼, ê°œìˆ˜ ë“±ì„ ì§€ì •í•´ ë´‡ì—ê²Œ ìš”ì²­í•œë‹¤.
 3. ë´‡ì´ ì‚¬ìš©ìì˜ ì¡°ê±´ì— ë§ì¶°ì„œ gif ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
 4. ë´‡ì´ ìˆ˜ì§‘ëœ gif ì •ë³´ë¥¼ ì‚¬ìš©ìê°€ ì§€ì •í•œ ì‹œê°„ì— ë´‡ ë©”ì‹œì§€ë¡œ ì „ì†¡í•œë‹¤.  

3, 4ë²ˆì€ ê±°ì˜ ë™ì‹œ ê°™ê¸´ í•œë°...  

---

### 2. ì„¤ë¬¸ ë´‡
call_modal ë°©ì‹ ë°˜ì‘í˜• ë´‡.  
ì‹œë‚˜ë¦¬ì˜¤  
 1. ë°œì†¡ê¸°ë¥¼ ê°œë°œí•œë‹¤.
    - ì„¤ë¬¸ë‚´ìš© ëª¨ë‹¬ë·° ë“±ë¡/ìˆ˜ì •
    - ë©”ì‹œì§€ ë°œì†¡
 2. ë´‡(ì„œë²„)ì´ ì„¤ë¬¸ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ë°œì†¡í•œë‹¤.
 3. ì‚¬ìš©ìê°€ ì„¤ë¬¸ì— ëŒ€í•´ ì‘ë‹µí•œë‹¤.
 4. ì‚¬ìš©ìì˜ ì‘ë‹µì„ ì €ì¥í•˜ê³  ì—‘ì…€ ë‹¤ìš´ë¡œë“œë¥¼ ì§€ì›í•œë‹¤.

```
{
	"text": "ì„¤ë¬¸ì¡°ì‚¬ ì´ë²¤íŠ¸",
		"blocks": [
			{
				"type": "header",
				"text": "â˜• ì‚¬ë‚´ ì¹´í˜ ë§Œì¡±ë„ ì¡°ì‚¬ ğŸ¥¤",
				"style": "blue"
			},
			{
				"type": "text",
				"text": "ì–´ëŠë§ ì‚¬ë‚´ì¹´í˜ê°€ ë°”ë€ì§€ í•œë‹¬ì´ ë˜ì—ˆë„¤ìš”.ğŸ˜‰ \ní¬ë£¨ë“¤ì´ ì¹´í˜ë¥¼ ì´ìš©í•˜ê³  ê³„ì‹ ì§€ ì˜ê²¬ì„ ë“¤ì–´ë³´ê³ ì ì„¤ë¬¸ ì¡°ì‚¬ë¥¼ ì§„í–‰í•´ë´…ë‹ˆë‹¤!! \nì„¤ë¬¸ì— ì°¸ì—¬í•˜ë©´ í‘¸ì§í•œ ê²½í’ˆ ì°¬ìŠ¤ê°€ìˆìœ¼ë‹ˆ ìƒí’ˆ ê¼­ ë°›ì•„ê°€ì„¸ìš”! ğŸ",
				"markdown": true
			},
			{
				"type": "button",
				"action_type": "call_modal",
				"value":"number=A-23&cancle",
				"text": "ì„¤ë¬¸ ì°¸ì—¬í•˜ê¸°",
				"style": "default"
			}
		]
}
```

ì´ë ‡ê²Œ jsoní˜•ì‹ìœ¼ë¡œ ì„¤ë¬¸ ë©”ì‹œì§€ë¥¼ ì „ë‹¬, ë§ˆì§€ë§‰ button ë¸”ë¡ì´ call_modal  

---

### 3. íšŒì˜ì‹¤ ì²´í¬ì¸ ë´‡
ì‚¬ìš©ìì˜ íšŒì˜ì‹¤ ì˜ˆì•½ ì‹œê°„ì— ë§ì¶° íšŒì˜ì‹¤ ì²´í¬ì¸ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ë´‡. ì•Œë¦¼í˜•ì‹ ê°™ìœ¼ë©´ì„œë„ submit_actionì´ í¬í•¨ë˜ëŠ” ë°˜ì‘í˜• ë´‡ì´ë‹¤.  

ì‹œë‚˜ë¦¬ì˜¤  
 1. íšŒì˜ì‹¤ ì˜ˆì•½ í˜ì´ì§€ ê°œë°œ (í˜¹ì€ ì´ë¯¸ ì¡´ì¬)
 2. ë´‡(ì„œë²„)ì´ ì˜ˆì•½ ì‹œê°„ì— ë§ì¶° ì²´í¬ì¸ ë©”ì‹œì§€ ë°œì†¡
 3. ì‚¬ìš©ìê°€ ë²„íŠ¼ìœ¼ë¡œ ì²´í¬ì¸ ì—¬ë¶€ ì‘ë‹µ(ì²´í¬ì¸/ì˜ˆì•½ì·¨ì†Œ)
 4. ì‚¬ìš©ìì˜ ì‘ë‹µì— ë”°ë¼ ì²´í¬ì¸ í™•ì¸/íšŒì˜ì‹¤ ì˜ˆì•½ ì·¨ì†Œ

```
{
	"text": "Push alarm message",
		"blocks": [
			{
				"type": "image_link",
				"url": "https://t1.kakaocdn.net/kakaowork/resources/block-kit/imagelink/image2@3x.jpg"
			},
			{
				"type": "text",
				"text": "10ë¶„ í›„ íšŒì˜ì‹¤ ì˜ˆì•½ì´ ìˆìŠµë‹ˆë‹¤. \nì²´í¬ì¸ í•´ì£¼ì„¸ìš”. \n\n íšŒì˜ì‹¤ 8ì¸µ A-23 \n ì‹œê°„ 11:00~12:00 ",
				"markdown": true
			},
			{
				"type": "action",
				"elements": [
					{ "type": "button",
					 "text": "ì˜ˆì•½ì·¨ì†Œ",
					 "style": "primary",
					 "action_type": "submit_action",
					 "action_name": "cancle",
					 "value": "number=A-23"
					},
					{
						"type": "button",
						"text": "ì²´í¬ì¸",
						"style": "danger",
						"action_type": "submit_action",
						"action_name": "checkIn",
						"value": "number=A-23"
					}
				]
			}
		]
}
```

ì´ë¯¸ì§€ ê¹Œì§€ í¬í•¨ëœ ë©‹ì§„ ë©”ì‹œì§€ë¥¼ ë§Œë“¤ì–´ì„œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.  
ë§ˆì§€ë§‰ action ë¸”ë¡ì— elements ì†ì„±ì„ ì¤˜ì„œ Yes/No ë²„íŠ¼ì„ ë§Œë“  ë¶€ë¶„ ì£¼ëª©.  

## 4. ì˜ˆì œ í”„ë¡œì íŠ¸ ì‹¤ìŠµ

ì´ì œë¶€í„° ë³¸ë¡ ì— ë“¤ì–´ê°„ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì•ì„œ ì†Œê°œí•œ ì„¸ ê°€ì§€ ì˜ˆì œ ì¤‘ ì„¤ë¬¸ì¡°ì‚¬ ë´‡ì„ ë§Œë“¤ì–´ ë³´ë„ë¡ í•œë‹¤.  

ë‹¤ìŒê³¼ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë”°ë¥¸ë‹¤.  
 1. ì„¤ë¬¸ ì¡°ì‚¬ ë©”ì„¸ì§€ ì „ì†¡
 2. ìœ ì €ê°€ ì„¤ë¬¸ ì‘ì„±
 3. ì„¤ë¬¸ ì™„ë£Œ ì•Œë¦¼ ì „ì†¡

ì¢€ ë” í’€ì–´ì„œ ì“°ë©´,  
 1. ìœ ì €ì—ê²Œ ì„¤ë¬¸ ì „ì†¡
 2. request urlì„ í†µí•´ ì•¡ì…˜ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ ëª¨ë‹¬ ë·° ì •ë³´ë¥¼ ë°˜í™˜
 3. callback urlì„ í†µí•´ ì‚¬ìš©ìì˜ ì‘ë‹µì„ ë°›ì•„ ì„¤ë¬¸ ì™„ë£Œ ë©”ì„¸ì§€ë¥¼ ì „ì†¡

ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë©”ì„¸ì§€ ìœ í˜•ì€ ì´ ë‘ê°€ì§€ (ë‹¹ì—°íˆ ë©”ì„¸ì§€ ë‘ ê°œ ë³´ë‚´ë‹ˆê¹Œ...)  
 * call_modalì´ í¬í•¨ëœ ë°˜ì‘í˜• Modal (call_modal blockì´ í¬í•¨ëœ ë§í’ì„ ê³¼ call_modalë¡œ ë¶ˆëŸ¬ì™€ì§€ê²Œ ë  Modalë¡œ êµ¬ì„±)  
 * ì„¤ë¬¸ í›„ ì™„ë£Œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê¸° ìœ„í•œ ì•Œë¦¼í˜• ë©”ì„¸ì§€  

í•˜ë‚˜í•˜ë‚˜ ë¶„ì„í•´ë³´ì.  

 1. ìœ ì €ì—ê²Œ ì„¤ë¬¸ ì „ì†¡  

ì•Œë¦¼ì„ ë³´ë‚¼ ìœ ì € ID íƒìƒ‰ -> í•´ë‹¹ ìœ ì € IDë¥¼ í†µí•´ ì±„íŒ…ë°© ìƒì„± -> ìƒì„±ëœ ì±„íŒ…ë°©ì— ì•Œë¦¼ ì „ì†¡  

 2. request urlì„ í†µí•´ ì•¡ì…˜ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ ëª¨ë‹¬ ë·° ì •ë³´ë¥¼ ë°˜í™˜  

ìœ ì €ê°€ ì„¤ë¬¸ì¡°ì‚¬ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì¹´ì¹´ì˜¤ì›Œí¬ ì„œë²„ê°€ request urlì— ë“±ë¡í•œ urlë¡œ ì–´ë–¤ ëª¨ë‹¬ ë·°ë¥¼ ë„ìš¸ ê²ƒì¸ì§€ ë¬¼ì–´ë³¸ë‹¤.  
ëª¨ë‹¬ì˜ í˜•íƒœëŠ” jsonìœ¼ë¡œ ë§Œë“¤ì–´ responseë¡œ ì „ë‹¬í•´ì¤˜ì•¼ í•œë‹¤.  
```
                        modal?
KakaoWork           ===Request==>         3rd Party

 Server             <==Response==          Server
                      modal.json
```

 3. callback urlì„ í†µí•´ ì‚¬ìš©ìì˜ ì‘ë‹µì„ ë°›ì•„ ì„¤ë¬¸ ì™„ë£Œ ë©”ì„¸ì§€ë¥¼ ì „ì†¡

ìœ ì €ê°€ ì„¤ë¬¸ì„ ì™„ë£Œí•˜ë©´ ì¹´ì¹´ì˜¤ì„œë²„ê°€ ì‘ë‹µ ê²°ê³¼ë¥¼ callback urlë¡œ ë³´ë‚´ ì‘ë‹µì„ ì¤€ë‹¤. POST ë°©ì‹ì¸ë“¯. ì—¬ê¸°ì„œ ì„œë²„ì¸¡ì˜ ë©”ì†Œë“œê°€ request bodyë¥¼ ì½ê³  ì„¤ë¬¸ ê²°ê³¼ ì·¨í•© ë° ì‘ë‹µ ë©”ì„¸ì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆëŠ”ë“¯ í•˜ë‹¤.  

```
                     body: survey
KakaoWork           ===Request==>         3rd Party

 Server             <==Response==          Server
                     message.json
```

ajaxëŠ” ajax ë¼ì´ë¸ŒëŸ¬ë¦¬ê³„ì˜ ìŠ¤í…Œë”” ì…€ëŸ¬ axiosë¥¼ ì‚¬ìš©í•œë‹¤.  
ì‚¬ì‹¤ ë‚˜ë„ axiosë°–ì— ì•ˆì¨ë´ì„œ ë‹¤ë¥¸ê²Œ ìˆëŠ”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ  
configë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ìˆë‹¤. ì´ëŸ°ê²Œ ìˆëŠ”ì¤„ ì•Œì•˜ìœ¼ë©´ ì§„ì‘ì— ì¨ì˜¬ê»„.  

```
const Config = require('config');

console.log(Config.keys.kakaoWork.bot); // [APP KEY] ì¶œë ¥
```
config ëª¨ë“ˆ ê¸°ì–µí•´ë‘ì.  

ê·¼ë° ì–´ì°¨í”¼ ì‹¤ìŠµí•˜ë ¤ë©´ êµ¬ë¦„IDE í™˜ê²½ì—ì„œ ì‘ì—…í•´ì•¼ í•˜ê¸´ í•¨. êµ¬ë¦„IDEê°€ ìƒê°ë³´ë‹¤ í›¨ì”¬ ëŒ€ë‹¨í•œ í™˜ê²½ì´ê¸° ë•Œë¬¸ì—... github pagesê°™ì€ ê¸°ëŠ¥ë„ ì§€ì›í•˜ëŠ” ê²ƒ ê°™ë‹¤. ì¼ì¢…ì˜ ì„ì‹œ ë„ë©”ì¸  

ë©”ì‹œì§€ ë¸”ë¡/ëª¨ë‹¬ì€ [ì¹´ì¹´ì˜¤ì›Œí¬ Block Kit Builder](https://www.kakaowork.com/block-kit-builder)ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì—­ì‹œ ì´ëŸ°ê±´ WYSIWYGì´ í•„ìˆ˜.  

ì´ ê°•ì˜ë¥¼ í†µí•´ ë°°ìš°ëŠ” ë¶€ë¶„ì€ ì¹´ì¹´ì˜¤ì›Œí¬ ë´‡ ë§Œë“¤ê¸°ì˜ ë¹™ì‚°ì˜ ì¼ê°ì— ë¶ˆê³¼í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ button ë¸”ë¡ì˜ action_typeì˜ ê²½ìš°, ë°°ìš´ ê²ƒì€ call_modal, submit_action ë‘˜ì´ì§€ë§Œ, open_external_app, open_inapp_browser, open_system_browser ì†ì„±ë„ ì¡´ì¬í•œë‹¤. ê° ê¸°ëŠ¥ë“¤ì€ ë­ ì´ë¦„ì—ì„œ ì§ê´€ì ìœ¼ë¡œ ì´í•´ ê°€ëŠ¥.  

call_modalì€ ì•„ë¬´íŠ¼ valueë¼ëŠ” ì†ì„±ì´ ì¶”ê°€ë¡œ í•„ìš”í•˜ê³ , value ì†ì„±ì€ ì¶œë ¥í•  modalì„ ì˜ë¯¸í•˜ëŠ”ë“¯?  

---

## 5. ë§ˆë¬´ìœ¼ë¦¬

ì•„ë¬´íŠ¼ ìœ ìš©í•œ í•™ìŠµì´ì—ˆë‹¤. APIë„ ì˜ ì •ë¦¬ë¼ìˆê³  ë©‹ë“¤ì–´ì§„ ë¹Œë”ê¹Œì§€ ìˆìœ¼ë‹ˆ ê°œë°œì´ í¬ê²Œ ì–´ë µì§„ ì•Šì„ë“¯. ì¤‘ìš”í•œê±´ ì•„ì´ë””ì–´ë¥¼ ì–¼ë§ˆë‚˜ ê¸°ë˜¥ì°¨ê²Œ ë§Œë“œëŠëƒê² ì§€ë§Œ...  

https://docs.kakaoi.ai/kakao_work/  
https://www.kakaowork.com/block-kit-builder  
